<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <p>Originally Published at <a href=“https://rapidapi.com/blog/weather-app-javascript-nodejs/”>RapidAPI Blog</a>.</p>

<p>The first official weather forecast ever appeared on the first of August 1861. The legendary vice-admiral Robert Fitzroy, a royal-navy officer and pioneer in meteorology, was collecting data for his Meteorological Office from 15 land stations across England. Nowadays, there are over 40000 stations across our planet, accessible via free, affordable, advanced, and accurate technologies. So what are we waiting for?</p><h2><span id=“what-is-a-weather-api”>What is a Weather API?</span></h2><p>Let’s start from the end.</p><p><a href=“https://rapidapi.com/blog/api-glossary/api/”>An API (application programming interface)</a> is a form of pre-defined interaction between the <a href=“https://rapidapi.com/blog/api-glossary/client/”>client</a> and the <a href=“https://rapidapi.com/blog/api-vs-web-service/”>service</a>.</p><p>In other words, the client doesn’t need to bother about the inside structure of the responding side and vice versa.</p><p>The main advantage of using weather APIs includes full independence from:</p><ul><li>platforms</li><li>OS</li><li>programming languages</li><li>technologies</li><li>devices</li><li><a href=“https://rapidapi.com/blog/ip-geolocation/”>geographical locations</a></li><li>and more!</li></ul><p>Weather APIs allow us to:</p><ul><li>cooperate with powerful and enormous data storage,</li><li>get historical weather records,</li><li>access forecasts for any point on Earth.</li></ul><p>Applications are only limited by our imagination and creativity. You can embed it inside your app as a feature (all data is ready, there is no need to process it).</p><p>You can <a href=“https://rapidapi.com/collection/chatbot-apis”>make a bot for some messenger</a> that will return a forecast.</p><p>You can even create an aggregator of different weather APIs.</p><p>There are many <a href=“https://rapidapi.com/blog/access-global-weather-data-with-these-weather-apis/”>popular weather APIs</a> out there to choose from. Let’s highlight a few of them:</p><h3><span id=“openweathermap”><a href=“https://rapidapi.com/community/api/open-weather-map”>OpenWeatherMap</a></span></h3><p>The OWM API is free on a basic plan and high-precision API. Their weather database is huge. You can use diverse metrics (e.g., temperature, humidity, air pollution, wind speed and degree, clouds percentage). You can also get a simple forecast, daily forecast, historical weather data, or use a city search.</p><h3><span id=“darksky”><a href=“https://rapidapi.com/darkskyapis/api/dark-sky”>DarkSky</a></span></h3><p>This weather API is gaining popularity. It is a freemium-based API with <a href=“https://rapidapi.com/blog/skyscanner-api-dark-sky-api-city-geolocation-lookup/”>powerful endpoints</a>:</p><ul><li>minute-by-minute forecast within an hour,</li><li>current weather with customized response data,</li><li>and a weather time machine.</li></ul><p>You can analyze past forecasts, real weather situations, or explore the future predictions.</p><blockquote><p>Related: <a href=“https://rapidapi.com/blog/dark-sky-api-javascript/”>How to use the Dark Sky API in JavaScript (Node.js)</a></p></blockquote><p>As mentioned above, <a href=“https://rapidapi.com/collection/top-weather-apis”>the list is huge</a>, so you can go with something else.</p><p>But in this article, we’ll show you how to use the OpenWeatherMap API to build an application.</p><h2><span id=“nodejs”>Node.js</span></h2><p>For this project, we’ll be using <a href=“https://en.wikipedia.org/wiki/Node.js”>node.js</a> – one of the most popular run-time environments for JavaScript.</p><p><a href=“https://rapidapi.com/blog/how-to-use-an-api-with-node-js/”>Node.js</a> helps create fast and advanced web applications. It has many additional libraries/modules for any purpose.</p><p>In case of any problems, you can discuss them within a responsive node user community.</p><p>For installing node.js or getting any information, <a href=“https://github.com/nodejs/node”>you can check out this page</a>. Once you have installed the node and npm to your PC, you can easily check it by typing the following commands in the terminal:</p><div class=“enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover enlighter-linenumbers “><div class=“enlighter-toolbar-top enlighter-toolbar”><div class=“enlighter-btn enlighter-btn-raw” title=“Toggle RAW code”></div><div class=“enlighter-btn enlighter-btn-copy” title=“Copy to clipboard”></div><div class=“enlighter-btn enlighter-btn-window” title=“Open code in new window”></div><div class=“enlighter-btn enlighter-btn-website” title=“EnlighterJS 3 Syntax Highlighter”></div></div><div class=“enlighter” style=””><div class=""><div><span class=“enlighter-text”>$ node -v</span></div></div><div class=""><div><span class=“enlighter-text”>v8.</span><span class=“enlighter-m3”>10</span><span class=“enlighter-text”>.</span><span class=“enlighter-n1”>0</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”>$ npm -v</span></div></div><div class=""><div><span class=“enlighter-text”></span><span class=“enlighter-n0”>3.5</span><span class=“enlighter-text”>.</span><span class=“enlighter-m3”>2</span></div></div></div><div class=“enlighter-raw”>$ node -v
v8.10.0
$ npm -v
3.5.2</div><div class=“enlighter-toolbar-bottom enlighter-toolbar”></div></div><pre class=“EnlighterJSRAW enlighter-origin” data-enlighter-language=“js”>$ node -v
v8.10.0
$ npm -v
3.5.2</pre><p>The versions may vary depending on your installation.</p><p>Now, let’s create our project and install all the required modules. First, create a folder where you want to keep all the work. Then move it in the terminal (you can use the <em>cd</em> command) and type this line:</p><div class=“enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover enlighter-linenumbers “><div class=“enlighter-toolbar-top enlighter-toolbar”><div class=“enlighter-btn enlighter-btn-raw” title=“Toggle RAW code”></div><div class=“enlighter-btn enlighter-btn-copy” title=“Copy to clipboard”></div><div class=“enlighter-btn enlighter-btn-window” title=“Open code in new window”></div><div class=“enlighter-btn enlighter-btn-website” title=“EnlighterJS 3 Syntax Highlighter”></div></div><div class=“enlighter” style=””><div class=""><div><span class=“enlighter-text”>$ npm init</span></div></div></div><div class=“enlighter-raw”>$ npm init</div><div class=“enlighter-toolbar-bottom enlighter-toolbar”></div></div><pre class=“EnlighterJSRAW enlighter-origin” data-enlighter-language=“js”>$ npm init</pre><p>After that, you should fill in some crucial data (inside of I/O in the terminal) for creating an independent node.js project.</p><p>Finally, there will be a <em>package.json</em> file with all the project info (including start file – by default, <em>it’s index.js</em>).</p><p>All the modules that we will install in this tutorial are local for this project, so your “main” node won’t be affected by this.</p><p>Now let’s install all the packages, which will help create the weather app.</p><p>We will need 3 additional modules:</p><ol><li>ejs</li><li>express</li><li>unirest.</li></ol><p>If this is still all confusing to you, don’t worry. We’ll explain in more detail below.</p><p>An example of the syntax for installing any package looks like this:: <em>npm install</em>. So, for our modules, it should look like this:</p><div class=“enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover enlighter-linenumbers “><div class=“enlighter-toolbar-top enlighter-toolbar”><div class=“enlighter-btn enlighter-btn-raw” title=“Toggle RAW code”></div><div class=“enlighter-btn enlighter-btn-copy” title=“Copy to clipboard”></div><div class=“enlighter-btn enlighter-btn-window” title=“Open code in new window”></div><div class=“enlighter-btn enlighter-btn-website” title=“EnlighterJS 3 Syntax Highlighter”></div></div><div class=“enlighter” style=””><div class=""><div><span class=“enlighter-text”>$ npm install ejs</span></div></div></div><div class=“enlighter-raw”>$ npm install ejs</div><div class=“enlighter-toolbar-bottom enlighter-toolbar”></div></div><pre class=“EnlighterJSRAW enlighter-origin” data-enlighter-language=“js”>$ npm install ejs</pre><p><em>EJS</em> – embedded javascript – template language for implementing js objects inside of HTML documents. It’s useful when you need to receive some data from your scripts and dynamically show it on your web page.</p><div class=“enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover enlighter-linenumbers “><div class=“enlighter-toolbar-top enlighter-toolbar”><div class=“enlighter-btn enlighter-btn-raw” title=“Toggle RAW code”></div><div class=“enlighter-btn enlighter-btn-copy” title=“Copy to clipboard”></div><div class=“enlighter-btn enlighter-btn-window” title=“Open code in new window”></div><div class=“enlighter-btn enlighter-btn-website” title=“EnlighterJS 3 Syntax Highlighter”></div></div><div class=“enlighter” style=””><div class=""><div><span class=“enlighter-text”>$ npm install express</span></div></div></div><div class=“enlighter-raw”>$ npm install express</div><div class=“enlighter-toolbar-bottom enlighter-toolbar”></div></div><pre class=“EnlighterJSRAW enlighter-origin” data-enlighter-language=“js”>$ npm install express</pre><p><em>Express</em> is a lightweight framework for node.js to work with fully provided web instruments. It helps run a server, handle requests from the client, and connect the correct HTML/ejs template with a response. You can read more details about ejs + express solutions here.</p><div class=“enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover enlighter-linenumbers “><div class=“enlighter-toolbar-top enlighter-toolbar”><div class=“enlighter-btn enlighter-btn-raw” title=“Toggle RAW code”></div><div class=“enlighter-btn enlighter-btn-copy” title=“Copy to clipboard”></div><div class=“enlighter-btn enlighter-btn-window” title=“Open code in new window”></div><div class=“enlighter-btn enlighter-btn-website” title=“EnlighterJS 3 Syntax Highlighter”></div></div><div class=“enlighter” style=””><div class=""><div><span class=“enlighter-text”>$ npm install unirest</span></div></div></div><div class=“enlighter-raw”>$ npm install unirest</div><div class=“enlighter-toolbar-bottom enlighter-toolbar”></div></div><pre class=“EnlighterJSRAW enlighter-origin” data-enlighter-language=“js”>$ npm install unirest</pre><p><em>Unirest</em> is a simple and powerful solution that requests a library. We will use it for making requests to OpenWeatherMap API and handle the response. For more information, <a href=“https://docs.rapidapi.com/docs/nodejs-unirest”>visit this doc</a>.</p><p>Now the project is ready and all the modules have been installed, so we can make the next step.</p><h2><span id=“how-to-use-the-openweathermap-api”>How to use the OpenWeatherMap API</span></h2><h3><span id=“1-get-a-rapidapi-account”>1. Get a RapidAPI account</span></h3><p>The first thing you need for this project (and for any project using API), is registering for a free user account on RapidAPI.</p><p><img class=“lazy-hidden alignnone size-full wp-image-2817” src=“https://rapidapi.com/blog/wp-content/uploads/2019/08/signup-for-rapidapi.png” data-lazy-type=“image” data-src=“https://rapidapi.com/blog/wp-content/uploads/2019/08/signup-for-rapidapi.png” alt=“RapidAPI Free API Key” width=“1025” height=“646” srcset="" data-srcset=“https://rapidapi.com/blog/wp-content/uploads/2019/08/signup-for-rapidapi.png 1025w, https://rapidapi.com/blog/wp-content/uploads/2019/08/signup-for-rapidapi-300x189.png 300w, https://rapidapi.com/blog/wp-content/uploads/2019/08/signup-for-rapidapi-768x484.png 768w, https://rapidapi.com/blog/wp-content/uploads/2019/08/signup-for-rapidapi-1024x645.png 1024w” sizes="(max-width: 1025px) 100vw, 1025px"><noscript><img class=“alignnone size-full wp-image-2817” src=“https://rapidapi.com/blog/wp-content/uploads/2019/08/signup-for-rapidapi.png” alt=“RapidAPI Free API Key” width=“1025” height=“646” srcset=“https://rapidapi.com/blog/wp-content/uploads/2019/08/signup-for-rapidapi.png 1025w, https://rapidapi.com/blog/wp-content/uploads/2019/08/signup-for-rapidapi-300x189.png 300w, https://rapidapi.com/blog/wp-content/uploads/2019/08/signup-for-rapidapi-768x484.png 768w, https://rapidapi.com/blog/wp-content/uploads/2019/08/signup-for-rapidapi-1024x645.png 1024w” sizes="(max-width: 1025px) 100vw, 1025px" /></noscript></p><p>RapidAPI maintains thousands of different APIs. It allows anybody to use them via a straightforward interface. RapidAPI also supports creating new APIs. So even if you aren’t an experienced API developer, this site should be in your bookmarks.</p><h3><span id=“2-get-an-api-keyaccess-to-openweathermap”>2. Get an API key/access to OpenWeatherMap</span></h3><p>Now add the <a href=“https://rapidapi.com/community/api/open-weather-map”>OpenWeatherMap API</a> to your list.</p><p>It’s <strong>free</strong>, so you can immediately start testing it once you have a RapidAPI account.</p><p>Let’s analyze the main API window:</p><p><img class=“lazy-hidden alignnone size-full wp-image-2509” src=“https://rapidapi.com/blog/wp-content/uploads/2019/06/openweathermap-API-header-parameter.png” data-lazy-type=“image” data-src=“https://rapidapi.com/blog/wp-content/uploads/2019/06/openweathermap-API-header-parameter.png” alt=“openweathermap API header parameter” width=“764” height=“370” srcset="" data-srcset=“https://rapidapi.com/blog/wp-content/uploads/2019/06/openweathermap-API-header-parameter.png 764w, https://rapidapi.com/blog/wp-content/uploads/2019/06/openweathermap-API-header-parameter-300x145.png 300w” sizes="(max-width: 764px) 100vw, 764px"><noscript><img class=“alignnone size-full wp-image-2509” src=“https://rapidapi.com/blog/wp-content/uploads/2019/06/openweathermap-API-header-parameter.png” alt=“openweathermap API header parameter” width=“764” height=“370” srcset=“https://rapidapi.com/blog/wp-content/uploads/2019/06/openweathermap-API-header-parameter.png 764w, https://rapidapi.com/blog/wp-content/uploads/2019/06/openweathermap-API-header-parameter-300x145.png 300w” sizes="(max-width: 764px) 100vw, 764px" /></noscript> <img class=“lazy-hidden alignnone size-large wp-image-3041” src=“https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-on-rapidapi-1024x391.png” data-lazy-type=“image” data-src=“https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-on-rapidapi-1024x391.png” alt=“openweathermap api on rapidapi” width=“1024” height=“391” srcset="" data-srcset=“https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-on-rapidapi-1024x391.png 1024w, https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-on-rapidapi-300x115.png 300w, https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-on-rapidapi-768x294.png 768w, https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-on-rapidapi.png 1350w” sizes="(max-width: 1024px) 100vw, 1024px"><noscript><img class=“alignnone size-large wp-image-3041” src=“https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-on-rapidapi-1024x391.png” alt=“openweathermap api on rapidapi” width=“1024” height=“391” srcset=“https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-on-rapidapi-1024x391.png 1024w, https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-on-rapidapi-300x115.png 300w, https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-on-rapidapi-768x294.png 768w, https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-on-rapidapi.png 1350w” sizes="(max-width: 1024px) 100vw, 1024px" /></noscript></p><p>The OpenWeatherMap Console some key stats about the API including rating, the popularity score, latency, etc.</p><p>There are also 3 tabs:</p><ul><li><strong>Endpoints</strong> – all request URLs that we can interact with.</li><li><strong>API Details</strong> – short docs for the API with links on authors.</li><li><strong>Discussions</strong> – topics on RapidAPI from the users about some issues and tasks.</li></ul><p>Navigate to <a href=“https://rapidapi.com/community/api/open-weather-map/endpoints”>Endpoints, or click here</a>. The structure looks pretty understandable:</p><p><img class=“lazy-hidden alignnone size-large wp-image-3042” src=“https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-endpoints-console-rapidapi-1024x392.png” data-lazy-type=“image” data-src=“https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-endpoints-console-rapidapi-1024x392.png” alt=“openweathermap api endpoints console rapidapi” width=“1024” height=“392” srcset="" data-srcset=“https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-endpoints-console-rapidapi-1024x392.png 1024w, https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-endpoints-console-rapidapi-300x115.png 300w, https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-endpoints-console-rapidapi-768x294.png 768w, https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-endpoints-console-rapidapi.png 1366w” sizes="(max-width: 1024px) 100vw, 1024px"><noscript><img class=“alignnone size-large wp-image-3042” src=“https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-endpoints-console-rapidapi-1024x392.png” alt=“openweathermap api endpoints console rapidapi” width=“1024” height=“392” srcset=“https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-endpoints-console-rapidapi-1024x392.png 1024w, https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-endpoints-console-rapidapi-300x115.png 300w, https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-endpoints-console-rapidapi-768x294.png 768w, https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-endpoints-console-rapidapi.png 1366w” sizes="(max-width: 1024px) 100vw, 1024px" /></noscript></p><p>The left section of the screen consists of links with all the unique endpoints in the API. <em>We will come back to this soon to explain all the features of the OpenWeatherMap.</em></p><p>The middle column gives detailed info about the selected endpoint (i.e., all required headers, params, optional params, etc.).</p><p>The right column represents a code snippet on the chosen language (node.js in our case, but there are <a href=“https://docs.rapidapi.com/docs/getting-started-with-rapidapi-sdks”>many more options</a>) and a sample response.</p><p>Here you can test all the requests by setting your query and clicking the “Test endpoint” button.</p><p>We are almost ready to develop the results.</p><p>To get access to OpenWeatherMap via RapidAPI, you’ll need to get the following:</p><ul><li>2 headers: <em>x-rapidapi-key</em> and <em>x-rapidapi-host</em></li><li>1 parameter: <em>appid</em> that you should get on site of the OpenWeatherMap. You’ll receive an API key when subscribing to one of their plans.</li></ul><h3><span id=“3-test-the-openweathermap-endpoints”>3. Test the OpenWeatherMap endpoints</span></h3><p>This weather API provides almost everything regarding meteorological data, but its most significant advantage is retrieving the weather data using parameters.</p><p>For this purpose, let’s use the <code>GET Search Weather Data</code> request.</p><p>This endpoint returns a search result based on a location.</p><p>It has one required parameter “q”, which is a query for a city. All other params are optional for modifying the search results. Let’s try to test this query (you can use the built-in RapidAPI tester for it).<br> Add both headers, appid parameter and “q=Rome”. Let’s try finding the capital of Italy. The response should be as follows:</p><div class=“enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover enlighter-linenumbers “><div class=“enlighter-toolbar-top enlighter-toolbar”><div class=“enlighter-btn enlighter-btn-raw” title=“Toggle RAW code”></div><div class=“enlighter-btn enlighter-btn-copy” title=“Copy to clipboard”></div><div class=“enlighter-btn enlighter-btn-window” title=“Open code in new window”></div><div class=“enlighter-btn enlighter-btn-website” title=“EnlighterJS 3 Syntax Highlighter”></div></div><div class=“enlighter” style=””><div class=""><div><span class=“enlighter-g1”>{</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-k2”>“message”:</span><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“accurate”</span><span class=“enlighter-g0”>,</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-k2”>“cod”:</span><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“200”</span><span class=“enlighter-g0”>,</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-k2”>“count”:</span><span class=“enlighter-text”> </span><span class=“enlighter-n1”>5</span><span class=“enlighter-g0”>,</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-k2”>“list”:</span><span class=“enlighter-text”> </span><span class=“enlighter-g1”>[</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> . . . . . . . </span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”>]</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”></span><span class=“enlighter-g1”>}</span></div></div></div><div class=“enlighter-raw”>{
“message”: “accurate”,
“cod”: “200”,
“count”: 5,
“list”: [
. . . . . . .
]
}</div><div class=“enlighter-toolbar-bottom enlighter-toolbar”></div></div><pre class=“EnlighterJSRAW enlighter-origin” data-enlighter-language=“json”>{
“message”: “accurate”,
“cod”: “200”,
“count”: 5,
“list”: [
. . . . . . .
]
}</pre><p>The provided result is returned in JSON (javascript object notation).</p><p><em>You may be wondering why we have 5 different results for Rome. The answer is simple: there is more than one city named “Rome” on our planet. </em></p><p>If you look at the top of the response, you will see a “count” key with the value “5”, which limits the number of responses to 5.</p><p>But what if we would prefer to get 40 cities? Well, for this purpose, the endpoint has an optional parameter <em>cnt</em>, which informs the server about the maximum number of cities that we are looking for.</p><p>Try to increase <em>cnt</em>, and you will see how many cities named “Rome” are located in the USA.</p><p>Also, if you don’t want to process the cities from any unnecessary countries, you can modify your <em>q</em> param with a comma and short name of the correct country (“Rome, IT” instead of “Rome” in our case).<br> Now let’s try to understand the key data from the response for one city.</p><div class=“enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover enlighter-linenumbers “><div class=“enlighter-toolbar-top enlighter-toolbar”><div class=“enlighter-btn enlighter-btn-raw” title=“Toggle RAW code”></div><div class=“enlighter-btn enlighter-btn-copy” title=“Copy to clipboard”></div><div class=“enlighter-btn enlighter-btn-window” title=“Open code in new window”></div><div class=“enlighter-btn enlighter-btn-website” title=“EnlighterJS 3 Syntax Highlighter”></div></div><div class=“enlighter” style=””><div class=""><div><span class=“enlighter-g1”>{</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“id”</span><span class=“enlighter-text”>: </span><span class=“enlighter-n1”>6539761</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“name”</span><span class=“enlighter-text”>: </span><span class=“enlighter-s0”>“Rome”</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“coord”</span><span class=“enlighter-text”>: </span><span class=“enlighter-g1”>{</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“lat”</span><span class=“enlighter-text”>: </span><span class=“enlighter-n0”>41.8933</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“lon”</span><span class=“enlighter-text”>: </span><span class=“enlighter-n0”>12.4829</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”>}</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“main”</span><span class=“enlighter-text”>: </span><span class=“enlighter-g1”>{</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“temp”</span><span class=“enlighter-text”>: </span><span class=“enlighter-n0”>302.9</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“pressure”</span><span class=“enlighter-text”>: </span><span class=“enlighter-n1”>1013</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“humidity”</span><span class=“enlighter-text”>: </span><span class=“enlighter-n1”>33</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“temp_min”</span><span class=“enlighter-text”>: </span><span class=“enlighter-n0”>299.82</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“temp_max”</span><span class=“enlighter-text”>: </span><span class=“enlighter-n0”>305.37</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”>}</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“dt”</span><span class=“enlighter-text”>: </span><span class=“enlighter-n1”>1565881765</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“wind”</span><span class=“enlighter-text”>: </span><span class=“enlighter-g1”>{</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“speed”</span><span class=“enlighter-text”>: </span><span class=“enlighter-n0”>6.7</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“deg”</span><span class=“enlighter-text”>: </span><span class=“enlighter-n1”>270</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”>}</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“sys”</span><span class=“enlighter-text”>: </span><span class=“enlighter-g1”>{</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“country”</span><span class=“enlighter-text”>: </span><span class=“enlighter-s0”>“IT”</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”>}</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“rain”</span><span class=“enlighter-text”>: </span><span class=“enlighter-k1”>null</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“snow”</span><span class=“enlighter-text”>: </span><span class=“enlighter-k1”>null</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“clouds”</span><span class=“enlighter-text”>: </span><span class=“enlighter-g1”>{</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“all”</span><span class=“enlighter-text”>: </span><span class=“enlighter-n1”>0</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”>}</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“weather”</span><span class=“enlighter-text”>: </span><span class=“enlighter-g1”>[</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”>{</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“id”</span><span class=“enlighter-text”>: </span><span class=“enlighter-n1”>800</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“main”</span><span class=“enlighter-text”>: </span><span class=“enlighter-s0”>“Clear”</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“description”</span><span class=“enlighter-text”>: </span><span class=“enlighter-s0”>“clear sky”</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>“icon”</span><span class=“enlighter-text”>: </span><span class=“enlighter-s0”>“01d”</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”>}</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”>]</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”>}</span></div></div></div><div class=“enlighter-raw”>{
“id”: 6539761,
“name”: “Rome”,
“coord”: {
“lat”: 41.8933,
“lon”: 12.4829
},
“main”: {
“temp”: 302.9,
“pressure”: 1013,
“humidity”: 33,
“temp_min”: 299.82,
“temp_max”: 305.37
},
“dt”: 1565881765,
“wind”: {
“speed”: 6.7,
“deg”: 270
},
“sys”: {
“country”: “IT”
},
“rain”: null,
“snow”: null,
“clouds”: {
“all”: 0
},
“weather”: [
{
“id”: 800,
“main”: “Clear”,
“description”: “clear sky”,
“icon”: “01d”
}
]
}</div><div class=“enlighter-toolbar-bottom enlighter-toolbar”></div></div><pre class=“EnlighterJSRAW enlighter-origin” data-enlighter-language=“null”>{
“id”: 6539761,
“name”: “Rome”,
“coord”: {
“lat”: 41.8933,
“lon”: 12.4829
},
“main”: {
“temp”: 302.9,
“pressure”: 1013,
“humidity”: 33,
“temp_min”: 299.82,
“temp_max”: 305.37
},
“dt”: 1565881765,
“wind”: {
“speed”: 6.7,
“deg”: 270
},
“sys”: {
“country”: “IT”
},
“rain”: null,
“snow”: null,
“clouds”: {
“all”: 0
},
“weather”: [
{
“id”: 800,
“main”: “Clear”,
“description”: “clear sky”,
“icon”: “01d”
}
]
}
</pre><p>This is a standard response. Let’s go over each element:</p><ul><li><strong>id</strong> and <strong>name</strong> nodes represent the name and geocode of a returned city;</li><li><strong>coord</strong> contains two <a href=“https://en.wikipedia.org/wiki/Geographic_coordinate_system#Latitude_and_longitude”>geographical coordinates</a> of the city, longitude (<strong>lon</strong>) and latitude (<strong>lat</strong>);</li><li><strong>main</strong> – place for the main weather info. Here we could take temperature (<strong>temp</strong>), it’s minimum (<strong>temp_min</strong>) and maximum (<strong>temp_max</strong>), <strong>pressure</strong>, and <strong>humidity</strong>. Please, pay attention to the sample temp value in the previous response (Kelvins). To convert it to Fahrenheit or Celsius, use a <em>units</em> parameter (imperial or metric value respectively);</li><li><strong>dt</strong> – millisecond DateTime value of the weather results;</li><li><strong>wind</strong> – node for wind metrics, i.e. <strong>speed</strong> and degree (<strong>deg</strong>);</li><li><strong>sys</strong> – system data about the city. In this specific example, it is a <strong>country</strong>;</li><li><strong>rain</strong>, <strong>snow</strong>, and <strong>clouds</strong> inform about the appropriate type of precipitation;</li><li><strong>weather</strong> – textual information about the weather state with id, its name (main) and a longer representation (<strong>description</strong>).</li></ul><p>With the help of other params, we can also search for a location by longitude and latitude (<em>lon</em> and <em>lat</em>), convert the response to other types (<em>mode</em> = json, html, xml), and more.</p><p>OpenWeatherMap also has 3 more endpoints, but they are quite similar to the search endpoint:</p><ul><li>GET Current Weather Data –  inform about the appropriate type of precipitation; place on Earth.</li><li>GET Daily Forecast Weather Data – predicts daily forecasts for the next 2 weeks.</li><li>GET Forecast Weather Data – returns a forecast for every 3 hours in the next 5 days.</li></ul><h2><span id=“how-to-build-a-weather-app”>How to Build a Weather App</span></h2><h3><span id=“getting-a-specific-place”>Getting a specific place</span></h3><p>Rome is a big city and sometimes you may want to find a more accurate place. Let’s say we want to get the weather forecast for a famous place in Rome. For example, the Colosseum. According to Wiki, this legendary building has the following geo-coordinates:</p><p>41°53′25″N 12°29′33″E / 41.8902°N 12.4924°E / 41.8902; 12.4924</p><p>Create a <em>colos.js</em> file in our project folder and type next lines:</p><div class=“enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover enlighter-linenumbers “><div class=“enlighter-toolbar-top enlighter-toolbar”><div class=“enlighter-btn enlighter-btn-raw” title=“Toggle RAW code”></div><div class=“enlighter-btn enlighter-btn-copy” title=“Copy to clipboard”></div><div class=“enlighter-btn enlighter-btn-window” title=“Open code in new window”></div><div class=“enlighter-btn enlighter-btn-website” title=“EnlighterJS 3 Syntax Highlighter”></div></div><div class=“enlighter” style=””><div class=""><div><span class=“enlighter-k2”>var</span><span class=“enlighter-text”> unirest = </span><span class=“enlighter-m0”>require</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>‘unirest’</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”>;</span></div></div><div class=""><div><span class=“enlighter-text”></span><span class=“enlighter-k2”>var</span><span class=“enlighter-text”> express = </span><span class=“enlighter-m0”>require</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>‘express’</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”>;</span></div></div><div class=""><div><span class=“enlighter-text”></span><span class=“enlighter-k2”>var</span><span class=“enlighter-text”> app = </span><span class=“enlighter-m0”>express</span><span class=“enlighter-g1”>(</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”>;</span></div></div></div><div class=“enlighter-raw”>var unirest = require(‘unirest’);
var express = require(‘express’);
var app = express();</div><div class=“enlighter-toolbar-bottom enlighter-toolbar”></div></div><pre class=“EnlighterJSRAW enlighter-origin” data-enlighter-language=“js”>var unirest = require(‘unirest’);
var express = require(‘express’);
var app = express();</pre><p>These lines import <em>unirest</em> and <em>express</em> modules and also create the <em>app</em> variable.</p><p>Now it’s time to handle the client requests (don’t confuse this with requests to API):</p><div class=“enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover enlighter-linenumbers “><div class=“enlighter-toolbar-top enlighter-toolbar”><div class=“enlighter-btn enlighter-btn-raw” title=“Toggle RAW code”></div><div class=“enlighter-btn enlighter-btn-copy” title=“Copy to clipboard”></div><div class=“enlighter-btn enlighter-btn-window” title=“Open code in new window”></div><div class=“enlighter-btn enlighter-btn-website” title=“EnlighterJS 3 Syntax Highlighter”></div></div><div class=“enlighter” style=””><div class=""><div><span class=“enlighter-text”>app.</span><span class=“enlighter-m3”>get</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>’/’</span><span class=“enlighter-text”>, </span><span class=“enlighter-k0”>function</span><span class=“enlighter-g1”>(</span><span class=“enlighter-text”>req, res</span><span class=“enlighter-g1”>)</span><span class=“enlighter-g1”>{</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”>unirest.</span><span class=“enlighter-m3”>get</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>“https://community-open-weather-map.p.rapidapi.com/weather”</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> .</span><span class=“enlighter-m1”>header</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>“X-RapidAPI-Key”</span><span class=“enlighter-text”>, </span><span class=“enlighter-g1”><</span><span class=“enlighter-text”>YOUR_RAPIDAPI_KEY</span><span class=“enlighter-g1”>></span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> .</span><span class=“enlighter-m1”>header</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>“x-rapidapi-host”</span><span class=“enlighter-text”>, </span><span class=“enlighter-s0”>“community-open-weather-map.p.rapidapi.com”</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> .</span><span class=“enlighter-m1”>query</span><span class=“enlighter-g1”>(</span><span class=“enlighter-g1”>{</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>‘appid’</span><span class=“enlighter-text”>: </span><span class=“enlighter-g1”><</span><span class=“enlighter-text”>YOUR_APP_ID</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>‘lon’</span><span class=“enlighter-text”>: </span><span class=“enlighter-s0”>‘12.4924’</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>‘lat’</span><span class=“enlighter-text”>: </span><span class=“enlighter-s0”>‘41.8902’</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>‘units’</span><span class=“enlighter-text”>: </span><span class=“enlighter-s0”>‘metric’</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>‘mode’</span><span class=“enlighter-text”>: </span><span class=“enlighter-s0”>‘html’</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”>}</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> .</span><span class=“enlighter-m1”>end</span><span class=“enlighter-g1”>(</span><span class=“enlighter-k0”>function</span><span class=“enlighter-text”> </span><span class=“enlighter-g1”>(</span><span class=“enlighter-text”>result</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”> </span><span class=“enlighter-g1”>{</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> res.</span><span class=“enlighter-m3”>writeHead</span><span class=“enlighter-g1”>(</span><span class=“enlighter-n1”>200</span><span class=“enlighter-text”>, </span><span class=“enlighter-g1”>{</span><span class=“enlighter-s0”>“Content-Type”</span><span class=“enlighter-text”>: </span><span class=“enlighter-s0”>“text/html”</span><span class=“enlighter-g1”>}</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”>;</span></div></div><div class=""><div><span class=“enlighter-text”> res.</span><span class=“enlighter-m3”>write</span><span class=“enlighter-g1”>(</span><span class=“enlighter-text”>result.</span><span class=“enlighter-m3”>body</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”>;</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-k9”>console</span><span class=“enlighter-text”>.</span><span class=“enlighter-m3”>log</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>‘Colosseum, I am coming!’</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”>;</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”>}</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”>;</span></div></div><div class=""><div><span class=“enlighter-text”></span><span class=“enlighter-g1”>}</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”>app.</span><span class=“enlighter-m3”>listen</span><span class=“enlighter-g1”>(</span><span class=“enlighter-n1”>8081</span><span class=“enlighter-text”>, </span><span class=“enlighter-k0”>function</span><span class=“enlighter-g1”>(</span><span class=“enlighter-g1”>)</span><span class=“enlighter-g1”>{</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-k9”>console</span><span class=“enlighter-text”>.</span><span class=“enlighter-m3”>log</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>‘Server running at https://127.0.0.1:8081/’</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”>;</span></div></div><div class=""><div><span class=“enlighter-text”></span><span class=“enlighter-g1”>}</span><span class=“enlighter-g1”>)</span></div></div></div><div class=“enlighter-raw”>app.get(’/’, function(req, res){
unirest.get(“https://community-open-weather-map.p.rapidapi.com/weather”)
.header(“X-RapidAPI-Key”, <YOUR_RAPIDAPI_KEY>)
.header(“x-rapidapi-host”, “community-open-weather-map.p.rapidapi.com”)
.query({
‘appid’: <YOUR_APP_ID>,
‘lon’: ‘12.4924’,
‘lat’: ‘41.8902’,
‘units’: ‘metric’,
‘mode’: ‘html’
})
.end(function (result) {
res.writeHead(200, {“Content-Type”: “text/html”});
res.write(result.body);
console.log(‘Colosseum, I am coming!’);
});
})
app.listen(8081, function(){
console.log(‘Server running at https://127.0.0.1:8081/’);
})</div><div class=“enlighter-toolbar-bottom enlighter-toolbar”></div></div><pre class=“EnlighterJSRAW enlighter-origin” data-enlighter-language=“js”>app.get(’/’, function(req, res){
unirest.get(“https://community-open-weather-map.p.rapidapi.com/weather”)
.header(“X-RapidAPI-Key”, <YOUR_RAPIDAPI_KEY>)
.header(“x-rapidapi-host”, “community-open-weather-map.p.rapidapi.com”)
.query({
‘appid’: <YOUR_APP_ID>,
‘lon’: ‘12.4924’,
‘lat’: ‘41.8902’,
‘units’: ‘metric’,
‘mode’: ‘html’
})
.end(function (result) {
res.writeHead(200, {“Content-Type”: “text/html”});
res.write(result.body);
console.log(‘Colosseum, I am coming!’);
});
})
app.listen(8081, function(){
console.log(‘Server running at https://127.0.0.1:8081/’);
})
</pre><p>The first method handles the get request (i.e., visiting the page with the named URL) for the server.</p><p>Here we use the <em>unirest</em> object for preparing and sending a get request to the API. It has a complete endpoint address, headers for RapidAPI and all the required params: <em>appid</em>, longitude and latitude, <em>units</em> and <em>mode</em> for returning response already in HTML.</p><p>The next step is to create a callback function <em>unirest.get().end()</em>, that creates a dynamic HTML response via <em>writeHead()</em> and <em>write()</em> methods.</p><p>Finally, it logs to the console with the phrase “Colosseum, I am coming!”.</p><p>To run our server, we used the <em>app.listen()</em> method (note that 8081 – port number for the localhost URL).</p><p>Now let’s try to run our code in the terminal:</p><div class=“enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover enlighter-linenumbers “><div class=“enlighter-toolbar-top enlighter-toolbar”><div class=“enlighter-btn enlighter-btn-raw” title=“Toggle RAW code”></div><div class=“enlighter-btn enlighter-btn-copy” title=“Copy to clipboard”></div><div class=“enlighter-btn enlighter-btn-window” title=“Open code in new window”></div><div class=“enlighter-btn enlighter-btn-website” title=“EnlighterJS 3 Syntax Highlighter”></div></div><div class=“enlighter” style=””><div class=""><div><span class=“enlighter-text”>$ node colos.</span><span class=“enlighter-m3”>js</span></div></div></div><div class=“enlighter-raw”>$ node colos.js</div><div class=“enlighter-toolbar-bottom enlighter-toolbar”></div></div><pre class=“EnlighterJSRAW enlighter-origin” data-enlighter-language=“js”>$ node colos.js</pre><p>The console response should be as follows:</p><div class=“enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover enlighter-linenumbers “><div class=“enlighter-toolbar-top enlighter-toolbar”><div class=“enlighter-btn enlighter-btn-raw” title=“Toggle RAW code”></div><div class=“enlighter-btn enlighter-btn-copy” title=“Copy to clipboard”></div><div class=“enlighter-btn enlighter-btn-window” title=“Open code in new window”></div><div class=“enlighter-btn enlighter-btn-website” title=“EnlighterJS 3 Syntax Highlighter”></div></div><div class=“enlighter” style=””><div class=""><div><span class=“enlighter-text”>Server running at https</span><span class=“enlighter-c0”>://127.0.0.1:8081/</span></div></div></div><div class=“enlighter-raw”>Server running at https://127.0.0.1:8081/</div><div class=“enlighter-toolbar-bottom enlighter-toolbar”></div></div><pre class=“EnlighterJSRAW enlighter-origin” data-enlighter-language=“null”>Server running at https://127.0.0.1:8081/</pre><p>Let’s try visiting the link:</p><p><img class=“lazy-hidden alignnone size-full wp-image-3043” src=“https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-weather-app-rapidapi.png” data-lazy-type=“image” data-src=“https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-weather-app-rapidapi.png” alt=“openweathermap api weather app rapidapi” width=“151” height=“157”><noscript><img class=“alignnone size-full wp-image-3043” src=“https://rapidapi.com/blog/wp-content/uploads/2019/09/openweathermap-api-weather-app-rapidapi.png” alt=“openweathermap api weather app rapidapi” width=“151” height=“157” /></noscript></p><p>There is no better time in a year to visit Colosseum than now. Be sure to check the console, as it should have changed:</p><div class=“enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover enlighter-linenumbers “><div class=“enlighter-toolbar-top enlighter-toolbar”><div class=“enlighter-btn enlighter-btn-raw” title=“Toggle RAW code”></div><div class=“enlighter-btn enlighter-btn-copy” title=“Copy to clipboard”></div><div class=“enlighter-btn enlighter-btn-window” title=“Open code in new window”></div><div class=“enlighter-btn enlighter-btn-website” title=“EnlighterJS 3 Syntax Highlighter”></div></div><div class=“enlighter” style=””><div class=""><div><span class=“enlighter-text”>Server running at https</span><span class=“enlighter-c0”>://127.0.0.1:8081/</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”>Colosseum, I am coming!</span></div></div></div><div class=“enlighter-raw”>Server running at https://127.0.0.1:8081/
Colosseum, I am coming!</div><div class=“enlighter-toolbar-bottom enlighter-toolbar”></div></div><pre class=“EnlighterJSRAW enlighter-origin” data-enlighter-language=“null”>Server running at https://127.0.0.1:8081/
Colosseum, I am coming!</pre><h3><span id=“making-the-html-response”>Making the HTML response</span></h3><p>Let’s be honest: it’s cheating when you use HTML mode directly from the API. Also, you will be unable to change anything in the representation result. So here we will try to create our own HTML template and feed it by data from OpenWeatherMap.</p><p>First, create a new file<em> forecast.js</em>.</p><p>Let’s pay tribute to Mr. Fitzroy and get a forecast for his native birthplace – Ampton.</p><p>Paste the next lines in the file:</p><div class=“enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover enlighter-linenumbers “><div class=“enlighter-toolbar-top enlighter-toolbar”><div class=“enlighter-btn enlighter-btn-raw” title=“Toggle RAW code”></div><div class=“enlighter-btn enlighter-btn-copy” title=“Copy to clipboard”></div><div class=“enlighter-btn enlighter-btn-window” title=“Open code in new window”></div><div class=“enlighter-btn enlighter-btn-website” title=“EnlighterJS 3 Syntax Highlighter”></div></div><div class=“enlighter” style=””><div class=""><div><span class=“enlighter-k2”>var</span><span class=“enlighter-text”> unirest = </span><span class=“enlighter-m0”>require</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>‘unirest’</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”>;</span></div></div><div class=""><div><span class=“enlighter-text”></span><span class=“enlighter-k2”>var</span><span class=“enlighter-text”> express = </span><span class=“enlighter-m0”>require</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>‘express’</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”>;</span></div></div><div class=""><div><span class=“enlighter-text”></span><span class=“enlighter-k2”>var</span><span class=“enlighter-text”> app = </span><span class=“enlighter-m0”>express</span><span class=“enlighter-g1”>(</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”>;</span></div></div><div class=""><div><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”>app.</span><span class=“enlighter-m3”>set</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>“view engine”</span><span class=“enlighter-text”>, </span><span class=“enlighter-s0”>“ejs”</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”>;</span></div></div><div class=""><div><span class=“enlighter-text”>app.</span><span class=“enlighter-m3”>use</span><span class=“enlighter-g1”>(</span><span class=“enlighter-text”>express.</span><span class=“enlighter-m3”>static</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>‘public’</span><span class=“enlighter-g1”>)</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”>;</span></div></div><div class=""><div><span class=“enlighter-text”>app.</span><span class=“enlighter-m3”>get</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>’/’</span><span class=“enlighter-text”>, </span><span class=“enlighter-k0”>function</span><span class=“enlighter-g1”>(</span><span class=“enlighter-text”>req, res</span><span class=“enlighter-g1”>)</span><span class=“enlighter-g1”>{</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”>unirest.</span><span class=“enlighter-m3”>get</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>“https://community-open-weather-map.p.rapidapi.com/forecast”</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> .</span><span class=“enlighter-m1”>header</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>“X-RapidAPI-Key”</span><span class=“enlighter-text”>, </span><span class=“enlighter-g1”><</span><span class=“enlighter-text”>YOUR_RAPIDAPI_KEY</span><span class=“enlighter-g1”>></span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> .</span><span class=“enlighter-m1”>header</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>“x-rapidapi-host”</span><span class=“enlighter-text”>, </span><span class=“enlighter-s0”>“community-open-weather-map.p.rapidapi.com”</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> .</span><span class=“enlighter-m1”>query</span><span class=“enlighter-g1”>(</span><span class=“enlighter-g1”>{</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>‘appid’</span><span class=“enlighter-text”>: </span><span class=“enlighter-g1”><</span><span class=“enlighter-text”>YOUR_APP_ID</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>‘q’</span><span class=“enlighter-text”>: </span><span class=“enlighter-s0”>‘Ampton’</span><span class=“enlighter-text”>,</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-s0”>‘units’</span><span class=“enlighter-text”>: </span><span class=“enlighter-s0”>‘metric’</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”>}</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> .</span><span class=“enlighter-m1”>end</span><span class=“enlighter-g1”>(</span><span class=“enlighter-k0”>function</span><span class=“enlighter-text”> </span><span class=“enlighter-g1”>(</span><span class=“enlighter-text”>result</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”> </span><span class=“enlighter-g1”>{</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> res.</span><span class=“enlighter-m3”>render</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>‘index’</span><span class=“enlighter-text”>, </span><span class=“enlighter-g1”>{</span><span class=“enlighter-text”>data:result.</span><span class=“enlighter-m3”>body</span><span class=“enlighter-g1”>}</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”>;</span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”>}</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”>;</span></div></div><div class=""><div><span class=“enlighter-text”></span><span class=“enlighter-g1”>}</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”>app.</span><span class=“enlighter-m3”>listen</span><span class=“enlighter-g1”>(</span><span class=“enlighter-n1”>8081</span><span class=“enlighter-text”>, </span><span class=“enlighter-k0”>function</span><span class=“enlighter-g1”>(</span><span class=“enlighter-g1”>)</span><span class=“enlighter-g1”>{</span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-k9”>console</span><span class=“enlighter-text”>.</span><span class=“enlighter-m3”>log</span><span class=“enlighter-g1”>(</span><span class=“enlighter-s0”>‘Server running at https://127.0.0.1:8081/’</span><span class=“enlighter-g1”>)</span><span class=“enlighter-text”>;</span></div></div><div class=""><div><span class=“enlighter-text”></span><span class=“enlighter-g1”>}</span><span class=“enlighter-g1”>)</span></div></div></div><div class=“enlighter-raw”>var unirest = require(‘unirest’);
var express = require(‘express’);
var app = express();

app.set(“view engine”, “ejs”);
app.use(express.static(‘public’));
app.get(’/’, function(req, res){
unirest.get(“https://community-open-weather-map.p.rapidapi.com/forecast”)
.header(“X-RapidAPI-Key”, <YOUR_RAPIDAPI_KEY>)
.header(“x-rapidapi-host”, “community-open-weather-map.p.rapidapi.com”)
.query({
‘appid’: <YOUR_APP_ID>,
‘q’: ‘Ampton’,
‘units’: ‘metric’
})
.end(function (result) {
res.render(‘index’, {data:result.body});
});
})
app.listen(8081, function(){
console.log(‘Server running at https://127.0.0.1:8081/’);
})</div><div class=“enlighter-toolbar-bottom enlighter-toolbar”></div></div><pre class=“EnlighterJSRAW enlighter-origin” data-enlighter-language=“js”>var unirest = require(‘unirest’);
var express = require(‘express’);
var app = express();

app.set(“view engine”, “ejs”);
app.use(express.static(‘public’));
app.get(’/’, function(req, res){
unirest.get(“https://community-open-weather-map.p.rapidapi.com/forecast”)
.header(“X-RapidAPI-Key”, <YOUR_RAPIDAPI_KEY>)
.header(“x-rapidapi-host”, “community-open-weather-map.p.rapidapi.com”)
.query({
‘appid’: <YOUR_APP_ID>,
‘q’: ‘Ampton’,
‘units’: ‘metric’
})
.end(function (result) {
res.render(‘index’, {data:result.body});
});
})
app.listen(8081, function(){
console.log(‘Server running at https://127.0.0.1:8081/’);
})
</pre><p>The code is similar to the previous example, except for a few things.</p><p>We will call the <strong>forecast </strong>endpoint, indicate ‘Ampton’ as query, and send results into the <em>res.render()</em> method (instead of direct HTML writing).</p><p>Ejs can help make the representation more attractive. As you may see, we get a response in the JSON and send it via <em>render()</em>. That tries to take pointed ejs-template and connect with the data.</p><p>By default, <em>render()</em> looks for the templates in the path: “./views/”. So now you need to create within the project new folder <em>views</em> and a file <em>index.ejs</em> inside of it.</p><p>Here we will create the HTML code for the nice response representation. As the response will have 40 nodes (forecasts for 5 days, every 3 hours) with the same structure, we will use the <code><table></code> tag and feed it through a loop.</p><p>Type the next lines in <em>index.ejs</em>:</p><div class=“enlighter-default enlighter-v-standard enlighter-t-atomic enlighter-hover enlighter-linenumbers “><div class=“enlighter-toolbar-top enlighter-toolbar”><div class=“enlighter-btn enlighter-btn-raw” title=“Toggle RAW code”></div><div class=“enlighter-btn enlighter-btn-copy” title=“Copy to clipboard”></div><div class=“enlighter-btn enlighter-btn-window” title=“Open code in new window”></div><div class=“enlighter-btn enlighter-btn-website” title=“EnlighterJS 3 Syntax Highlighter”></div></div><div class=“enlighter” style=””><div class=""><div><span class=“enlighter-k9”><!DOCTYPE html></span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”></span><span class=“enlighter-g1”><</span><span class=“enlighter-x1”>html</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”><</span><span class=“enlighter-x1”>head</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”><</span><span class=“enlighter-x1”>meta</span><span class=“enlighter-text”> </span><span class=“enlighter-x2”>charset</span><span class=“enlighter-k3”>=</span><span class=“enlighter-s0”>“utf-8”</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”><</span><span class=“enlighter-x1”>title</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”>OpenWeatherMap</span><span class=“enlighter-g1”></</span><span class=“enlighter-x1”>title</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”></</span><span class=“enlighter-x1”>head</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”><</span><span class=“enlighter-x1”>body</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> <% if(data !== null){ %></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”><</span><span class=“enlighter-x1”>h4</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”>A forecast for <%=data.city.name%>, <%=data.city.country%>:</span><span class=“enlighter-g1”></</span><span class=“enlighter-x1”>h4</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”><</span><span class=“enlighter-x1”>div</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”><</span><span class=“enlighter-x1”>table</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”><</span><span class=“enlighter-x1”>thead</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”><</span><span class=“enlighter-x1”>tr</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”><</span><span class=“enlighter-x1”>th</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”>Datetime</span><span class=“enlighter-g1”></</span><span class=“enlighter-x1”>th</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”><</span><span class=“enlighter-x1”>th</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”>Temperature</span><span class=“enlighter-g1”></</span><span class=“enlighter-x1”>th</span><span class=“enlighter-g1”>></span><span class=“enlighter-text”></span></div></div><div class=""><div><span class=“enlighter-text”> </span><span class=“enlighter-g1”><</span><span class=“enlighter-x1”>th</span>
</body>
</html>